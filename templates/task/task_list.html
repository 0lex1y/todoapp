{% extends 'base.html' %}
{% block title %}
  Home page
{% endblock %}

{% block content %}
{% if tasks %}
  <h1 class="mb-4">
    TODO List
    <a href="{% url 'task:task_create' %}" class="btn btn-primary btn-sm">Add task</a>
  </h1>

  {% for task in tasks %}
    <div class="mb-3 p-3 border rounded d-flex justify-content-between align-items-center">
      <div class="flex-grow-1">
        <div class="d-flex align-items-center">
          <strong class="me-2">{{ task.title }}</strong>
          {% if task.complete %}
            <span class="text-success fw-bold">âœ… Done</span>
          {% else %}
            <span class="text-danger fw-bold">âŒ Not done</span>
          {% endif %}
        </div>
        <small class="text-muted">Created: {{ task.created_at }} | Deadline: {{ task.deadline }}</small><br>

        <div class="mt-1">
          Tags:
          {% for tag in task.tags.all %}
            <span class="badge bg-secondary me-1">
              {{ tag.name }}
              <a href="{% url 'task:tags_update' tag.id %}" class="text-white text-decoration-none ms-1">âœï¸</a>
              <a href="{% url 'task:tags_delete' tag.id %}" class="text-white text-decoration-none ms-1">ğŸ—‘ï¸</a>
            </span>
          {% empty %}
            <span>No tags</span>
          {% endfor %}
        </div>
      </div>

      <div class="text-end ms-3">
        {% if task.complete %}
          <a href="{% url 'task:tasks_toggle' task.id %}" class="btn btn-outline-success btn-sm">Undo</a>
        {% else %}
          <a href="{% url 'task:tasks_toggle' task.id %}" class="btn btn-outline-primary btn-sm">Complete</a>
        {% endif %}
      </div>
    </div>
  {% endfor %}
{% else %}
  <h3>No tasks in ToDo list</h3>
{% endif %}
{% endblock %}
